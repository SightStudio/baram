<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.app.mapper.user">
	
	<!-- 유저 회원 가입  -->
    <insert id="signup" parameterType="commonVO">
    <![CDATA[
		INSERT INTO tb_user
			(id, pw, name, email, phone_num, user_rank_seq)
		VALUES
			(#{id}, SHA2(#{pw}, 256), #{name}, #{email}, 1)
    ]]>
    </insert>
   
	<!-- 단일 유저 정보 선택 -->
   	<select id="selectUser" parameterType="commonVO" resultType="commonVO">
    <![CDATA[
		SELECT user_seq, 
			   id, 
			   pw, 
			   name, 
			   email, 
			   phone_num,
			   rank_name,
			   user_rank_seq
		FROM  tb_user 
		    INNER JOIN tb_user_rank
		USING(user_rank_seq)
		WHERE id = #{id}
		LIMIT 1
	]]>
    </select>
   
    <delete id="dropUserSaveList" parameterType="commonVO">
    <![CDATA[
     	DELETE 
     	FROM  lecture_unique
		WHERE user_id = #{user_id}
	]]>
    </delete>
</mapper>